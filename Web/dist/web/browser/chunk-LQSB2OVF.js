import{b as A,c as V,d as C}from"./chunk-NE7GZ4P3.js";import{a as h}from"./chunk-2G5LAZZT.js";import"./chunk-HNYYVXMR.js";import{d as k,h as B}from"./chunk-7Q4JSMIS.js";import{c as E,d as _,e as N,f as H,g as j,h as w,i as D,k as q,l as G,n as R}from"./chunk-QFX2EMHE.js";import{$ as I,$a as y,Aa as g,La as d,Pa as f,Sa as s,Vb as M,Wa as a,Xa as l,Xb as O,Ya as v,ab as b,db as x,hc as P,ic as T,kb as m,lb as c,mb as u,nb as F,ob as L,qb as S,tb as n,ub as r,za as t}from"./chunk-6HVPCAXH.js";import"./chunk-2VMXMS7J.js";var J=e=>({"is-invalid":e});function z(e,p){if(e&1&&(a(0,"p",6),m(1),n(2,"translate"),l()),e&2){let i=b();t(),c(r(2,1,"errors."+i.error.message))}}function K(e,p){e&1&&(m(0),n(1,"translate")),e&2&&u(" ",r(1,1,"errors.required")," ")}function Q(e,p){e&1&&(m(0),n(1,"translate")),e&2&&u(" ",r(1,1,"errors.invalid-email")," ")}function W(e,p){if(e&1&&(a(0,"div",10),d(1,K,2,3)(2,Q,2,3),l()),e&2){let i=b();t(),s(i.controls.email.errors.required?1:i.controls.email.errors.invalidEmail?2:-1)}}function X(e,p){e&1&&(a(0,"div",10),m(1),n(2,"translate"),l()),e&2&&(t(),u(" ",r(2,1,"errors.required")," "))}var U=class e{constructor(p,i,o){this.authService=p;this.router=i;this.tokenHelperService=o}isSubmitted=!1;loginForm=new j({email:new w(null,[_.required,A()]),password:new w(null,[_.required])});error;ngOnInit(){this.checkIsLoggedIn()}checkIsLoggedIn(){this.tokenHelperService.isExpired||this.router.navigateByUrl("dashboard")}get controls(){return this.loginForm.controls}submit(){if(this.isSubmitted=!0,this.loginForm.valid){let p=Object.assign(this.loginForm.value);this.authService.login(p).subscribe({next:i=>{localStorage.setItem("token",i),this.tokenHelperService.decodeJwt(),this.router.navigateByUrl("dashboard")},error:i=>{this.error=JSON.parse(i.error)}})}}static \u0275fac=function(i){return new(i||e)(g(C),g(k),g(h))};static \u0275cmp=I({type:e,selectors:[["app-login"]],standalone:!0,features:[F([C,h]),L],decls:28,vars:28,consts:[[1,"d-flex","mt-5","justify-content-center","align-items-center"],[3,"ngSubmit","formGroup"],[1,"reg-card"],[1,"card-header"],[1,"h1"],[1,"card-body"],[1,"text-danger"],[1,"form-group","mt-3"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email","autocomplete","false","autofocus","",1,"form-control",3,"placeholder","ngClass"],[1,"invalid-feedback"],[1,"form-group","mt-3","mb-2"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","autocomplete","false","showHidePassword","",1,"form-control",3,"placeholder","ngClass"],[1,"separator"],["type","submit",1,"btn","btn-primary","w-100"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"form",1),y("ngSubmit",function(){return o.submit()}),a(2,"div",2)(3,"div",3)(4,"h1",4),m(5),n(6,"translate"),l()(),a(7,"div",5),d(8,z,3,3,"p",6),a(9,"div",7)(10,"label",8),m(11),n(12,"translate"),l(),v(13,"input",9),n(14,"translate"),d(15,W,3,1,"div",10),l(),a(16,"div",11)(17,"label",12),m(18),n(19,"translate"),l(),v(20,"input",13),n(21,"translate"),d(22,X,3,3,"div",10),l(),v(23,"div",14),a(24,"div",7)(25,"button",15),m(26),n(27,"translate"),l()()()()()()),i&2&&(t(),f("formGroup",o.loginForm),t(4),c(r(6,12,"login.title")),t(3),s(o.error?8:-1),t(3),c(r(12,14,"login.email")),t(2),x("placeholder",r(14,16,"login.email")),f("ngClass",S(24,J,o.isSubmitted&&o.controls.email.errors)),t(2),s(o.isSubmitted&&o.controls.email.errors?15:-1),t(3),c(r(19,18,"login.password")),t(2),x("placeholder",r(21,20,"login.password")),f("ngClass",S(26,J,o.isSubmitted&&o.controls.password.errors)),t(2),s(o.isSubmitted&&o.controls.password.errors?22:-1),t(4),u(" ",r(27,22,"login.login")," "))},dependencies:[T,P,R,D,E,N,H,q,G,O,M,B,V],styles:[".reg-card[_ngcontent-%COMP%]{width:35vw;max-width:628px;min-width:536px;border-radius:20px;overflow:hidden;margin-bottom:20px;background-color:#fff}.card-header[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;min-height:84px;padding:1rem}.card-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:10px;font-size:24px;font-weight:700}.card-body[_ngcontent-%COMP%]{padding:20px}.separator[_ngcontent-%COMP%]{margin-top:2rem}@media only screen and (max-width: 425px){.reg-card[_ngcontent-%COMP%]{width:100%;min-width:auto}}"]})};export{U as LoginComponent};
