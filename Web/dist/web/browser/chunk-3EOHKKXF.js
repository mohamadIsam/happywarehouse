import{a as me}from"./chunk-4CHXPSIC.js";import{a as se}from"./chunk-FGCV3IXA.js";import{a as ne,b as oe,c as re,d as ae}from"./chunk-XMZP254X.js";import{b as ee,d as te}from"./chunk-7Q4JSMIS.js";import{a as le}from"./chunk-H6J2F3XK.js";import{c as k,d as v,e as D,f as T,g as W,h as u,i as R,j as ie,k as M,l as V,n as j}from"./chunk-QFX2EMHE.js";import{$ as y,$a as C,Aa as b,La as p,Pa as I,Qa as x,R as O,Sa as c,Ta as z,Ua as $,Va as U,Vb as Q,W as L,Wa as r,Xa as o,Xb as X,Ya as f,Za as E,ab as g,bc as Y,cc as Z,hc as P,ia as w,ic as q,ja as F,kb as a,lb as _,mb as s,ob as B,pb as J,qb as N,tb as l,ub as d,vb as K,za as t}from"./chunk-6HVPCAXH.js";import"./chunk-2VMXMS7J.js";var S=class i{constructor(n){this.httpClient=n}getItems(n,e=1){var m=new Y().set("pageNumber",e);return this.httpClient.get(`api/Item/getAll/${n}`,{params:m})}getItemById(n){return this.httpClient.get(`api/Item/getById/${n}`)}create(n){return this.httpClient.post("api/Item/create",n)}update(n){return this.httpClient.put("api/Item/update",n)}static \u0275fac=function(e){return new(e||i)(L(Z))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ie=()=>({value:1});function ge(i,n){if(i&1&&(r(0,"p",11),a(1),l(2,"translate"),o()),i&2){let e=g(2);t(),s(" ",d(2,1,"errors."+e.error.message)," ")}}function he(i,n){i&1&&(r(0,"div",16),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function Ce(i,n){i&1&&(r(0,"div",16),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function _e(i,n){i&1&&(a(0),l(1,"translate")),i&2&&s(" ",d(1,1,"errors.required")," ")}function xe(i,n){i&1&&(a(0),l(1,"translate")),i&2&&s(" ",K(1,1,"errors.min",J(4,Ie))," ")}function Se(i,n){if(i&1&&(r(0,"div",16),p(1,_e,2,3)(2,xe,2,5),o()),i&2){let e=g(2);t(),c(e.controls.qty.errors.required?1:e.controls.qty.errors.min?2:-1)}}function ye(i,n){i&1&&(r(0,"div",16),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function we(i,n){i&1&&(r(0,"div",16),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function Fe(i,n){if(i&1){let e=E();r(0,"form",9),C("ngSubmit",function(){w(e);let h=g();return F(h.submit())}),r(1,"div",10),p(2,ge,3,3,"p",11),r(3,"div",12)(4,"div",13)(5,"label",14),a(6),l(7,"translate"),o(),f(8,"input",15),p(9,he,3,3,"div",16),o()(),r(10,"div",12)(11,"div",13)(12,"label",17),a(13),l(14,"translate"),o(),f(15,"input",18),p(16,Ce,3,3,"div",16),o()(),r(17,"div",12)(18,"div",13)(19,"label",19),a(20),l(21,"translate"),o(),f(22,"input",20),p(23,Se,3,1,"div",16),o()(),r(24,"div",12)(25,"div",13)(26,"label",21),a(27),l(28,"translate"),o(),f(29,"input",22),p(30,ye,3,3,"div",16),o()(),r(31,"div",12)(32,"div",13)(33,"label",23),a(34),l(35,"translate"),o(),f(36,"input",24),p(37,we,3,3,"div",16),o()()(),r(38,"div",25)(39,"button",26),a(40),l(41,"translate"),o()()()}if(i&2){let e=g();I("formGroup",e.itemForm),t(2),c(e.error?2:-1),t(4),s(" ",d(7,23,"item.name")," "),t(2),x("is-invalid",e.submitted&&e.controls.name.errors),t(),c(e.submitted&&e.controls.name.errors?9:-1),t(4),s(" ",d(14,25,"item.sku")," "),t(2),x("is-invalid",e.submitted&&e.controls.sku.errors),t(),c(e.submitted&&e.controls.sku.errors?16:-1),t(4),s(" ",d(21,27,"item.qty")," "),t(2),x("is-invalid",e.submitted&&e.controls.qty.errors),t(),c(e.submitted&&e.controls.qty.errors?23:-1),t(4),s(" ",d(28,29,"item.coast")," "),t(2),x("is-invalid",e.submitted&&e.controls.costPrice.errors),t(),c(e.submitted&&e.controls.costPrice.errors?30:-1),t(4),s(" ",d(35,31,"item.msrp")," "),t(2),x("is-invalid",e.submitted&&e.controls.mSRPPrice.errors),t(),c(e.submitted&&e.controls.mSRPPrice.errors?37:-1),t(3),s(" ",d(41,33,"action.submit")," ")}}var G=class i{constructor(n,e){this.itemService=n;this.modalService=e}itemId;warehouseId;submitted=!1;error;itemForm=new W({id:new u(0),name:new u(null,v.required),sku:new u(null),qty:new u(1,[v.required,v.min(1)]),costPrice:new u(null,[v.required]),mSRPPrice:new u(null,[v.required]),warehouseId:new u(null,[v.required])});ngOnInit(){this.controls.warehouseId.setValue(this.warehouseId),this.itemId&&this.controls.id.setValue(this.itemId)}get controls(){return this.itemForm.controls}dismiss(){this.modalService.dismiss()}submit(){if(this.submitted=!0,console.log(this.itemForm,this.itemForm.valid),this.itemForm.valid){let n=Object.assign(this.itemForm.value);this.itemService.create(n).subscribe(e=>{this.modalService.close(!0)})}}static \u0275fac=function(e){return new(e||i)(b(S),b(ne))};static \u0275cmp=y({type:i,selectors:[["app-item-dialog"]],standalone:!0,features:[B],decls:13,vars:4,consts:[[1,"modal","fade","show",2,"display","block","padding-right","15px"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","d-flex","justify-content-between"],[1,"modal-title"],[1,"fa","fa-warning","text-warning",2,"margin-right","7px","color","blue"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"text-danger"],[1,"col-12"],[1,"form-group","mt-3"],["for","name",1,"form-label"],["type","text","formControlName","name","id","name","autocomplete","false","showHidePassword","",1,"form-control"],[1,"invalid-feedback"],["for","sku",1,"form-label"],["type","text","formControlName","sku","id","sku","autocomplete","false","showHidePassword","",1,"form-control"],["for","qty",1,"form-label"],["type","number","formControlName","qty","id","qty","autocomplete","false","showHidePassword","",1,"form-control"],["for","coast",1,"form-label"],["type","number","formControlName","costPrice","id","coast","autocomplete","false","showHidePassword","",1,"form-control"],["for","msrp",1,"form-label"],["type","number","formControlName","mSRPPrice","id","msrp","autocomplete","false","showHidePassword","",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-outline-primary"]],template:function(e,m){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),f(5,"i",5),r(6,"span"),a(7),l(8,"translate"),o()(),r(9,"button",6),C("click",function(){return m.dismiss()}),r(10,"span",7),a(11,"\xD7"),o()()(),p(12,Fe,42,35,"form",8),o()()()),e&2&&(t(7),_(d(8,2,"item.title")),t(5),c(m.itemForm?12:-1))},dependencies:[q,P,j,R,k,ie,D,T,M,V],encapsulation:2})};var A=i=>({"is-invalid":i});function Ee(i,n){i&1&&(r(0,"div",7),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function Be(i,n){i&1&&(r(0,"div",7),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function Ne(i,n){i&1&&(r(0,"div",7),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function Pe(i,n){i&1&&(r(0,"div",7),a(1),l(2,"translate"),o()),i&2&&(t(),s(" ",d(2,1,"errors.required")," "))}function qe(i,n){if(i&1&&(r(0,"div",19)(1,"label",21),a(2),o(),r(3,"div",22)(4,"label",23),a(5),l(6,"translate"),o(),r(7,"p"),a(8),o()(),r(9,"div",22)(10,"label",23),a(11),l(12,"translate"),o(),r(13,"p"),a(14),o()(),r(15,"div",22)(16,"label",23),a(17),l(18,"translate"),o(),r(19,"p"),a(20),o()()()),i&2){let e=n.$implicit,m=n.$index;t(2),_(m+1),t(3),_(d(6,7,"item.name")),t(3),s(" ",e.name,""),t(3),_(d(12,9,"item.qty")),t(3),s(" ",e.qty,""),t(3),_(d(18,11,"item.coast")),t(3),s(" ",e.costPrice,"")}}function ke(i,n){if(i&1){let e=E();r(0,"label",18),a(1),l(2,"translate"),o(),$(3,qe,21,13,"div",19,z),r(5,"ngb-pagination",20),C("pageChange",function(h){w(e);let H=g();return F(H.getItemsByWarehouseId(h))}),o()}if(i&2){let e=g();t(),s(" ",d(2,7,"item.items")," "),t(2),U(e.paginatedResponse.data),t(2),I("collectionSize",e.paginatedResponse.totalCount)("page",e.paginatedResponse.pageNumber)("maxSize",e.paginatedResponse.pageSize)("rotate",!0)("ellipses",!1)("boundaryLinks",!0)}}var ce=class i{constructor(n,e,m,h,H,De){this.route=n;this.lookupService=e;this.warehouseService=m;this.router=h;this.modalService=H;this.itemService=De}warehouseId;submitted=!1;warehouseForm=new W({id:new u(0),name:new u(null,v.required),address:new u(null,v.required),city:new u(null,v.required),countryId:new u(null,v.required)});countries=[];paginatedResponse;ngOnInit(){this.warehouseId=this.route.snapshot.params.id,this.getCountries(),this.getWarehouseById(),this.getItemsByWarehouseId()}getItemsByWarehouseId(n=1){this.warehouseId&&this.itemService.getItems(this.warehouseId,n).subscribe(e=>this.paginatedResponse=e)}getCountries(){this.lookupService.getCountries().subscribe(n=>{this.countries=n})}get controls(){return this.warehouseForm.controls}getWarehouseById(){this.warehouseId&&this.warehouseService.getWarehouseById(this.warehouseId).subscribe(n=>this.populateUserForm(n))}populateUserForm(n){this.warehouseForm.patchValue({id:n.id,address:n.address,city:n.city,name:n.name,countryId:n.countryId})}createItem(){let n=this.modalService.open(G);n.componentInstance.warehouseId=this.warehouseId,n.closed.subscribe(e=>{e&&this.getItemsByWarehouseId()})}submit(){if(this.submitted=!0,this.warehouseForm.valid){let n=Object.assign(this.warehouseForm.value);n.id?this.warehouseService.update(n).subscribe(()=>{}):this.warehouseService.create(n).subscribe(()=>{this.router.navigateByUrl("dashboard/warehouses")})}}static \u0275fac=function(e){return new(e||i)(b(ee),b(me),b(se),b(te),b(oe),b(S))};static \u0275cmp=y({type:i,selectors:[["app-user-form"]],standalone:!0,features:[B],decls:43,vars:38,consts:[[3,"ngSubmit","formGroup"],[1,"row","p-5"],[1,"h4"],[1,"col-sm-12","col-md-6","col-lg-6"],[1,"form-group","mt-3"],["for","name",1,"form-label"],["type","text","formControlName","name","id","name","autocomplete","false",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","address",1,"form-label"],["type","text","formControlName","address","id","address","autocomplete","false",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","formControlName","city","id","city","autocomplete","false",1,"form-control",3,"ngClass"],["for","country",1,"form-label"],["key","id","name","name","formControlName","countryId",3,"options","value"],[1,"col-sm-12","col-md-12","col-lg-12"],["type","submit",1,"btn","btn-outline-primary","me-3"],[1,"mt-3"],[1,"btn","btn-primary",3,"click"],["for","",1,"font-bold","mt-5"],[1,"mt-3","d-flex","justify-content-between"],[3,"pageChange","collectionSize","page","maxSize","rotate","ellipses","boundaryLinks"],["for","",1,"font-bold"],[1,"d-flex"],["for","",1,"me-3","font-bold"]],template:function(e,m){e&1&&(r(0,"form",0),C("ngSubmit",function(){return m.submit()}),r(1,"div",1)(2,"h1",2),a(3),l(4,"translate"),o(),r(5,"div",3)(6,"div",4)(7,"label",5),a(8),l(9,"translate"),o(),f(10,"input",6),p(11,Ee,3,3,"div",7),o()(),r(12,"div",3)(13,"div",4)(14,"label",8),a(15),l(16,"translate"),o(),f(17,"input",9),p(18,Be,3,3,"div",7),o()(),r(19,"div",3)(20,"div",4)(21,"label",10),a(22),l(23,"translate"),o(),f(24,"input",11),p(25,Ne,3,3,"div",7),o()(),r(26,"div",3)(27,"div",4)(28,"label",12),a(29),l(30,"translate"),o(),f(31,"app-select",13),p(32,Pe,3,3,"div",7),o()(),p(33,ke,6,9),r(34,"div",14)(35,"div",4)(36,"button",15),a(37),l(38,"translate"),o()()(),r(39,"div",16)(40,"button",17),C("click",function(){return m.createItem()}),a(41),l(42,"translate"),o()()()()),e&2&&(I("formGroup",m.warehouseForm),t(3),s(" ",d(4,18,"warehouse.title")," "),t(5),s(" ",d(9,20,"warehouse.name")," "),t(2),I("ngClass",N(32,A,m.submitted&&m.controls.name.errors)),t(),c(m.submitted&&m.controls.name.errors?11:-1),t(4),s(" ",d(16,22,"warehouse.address")," "),t(2),I("ngClass",N(34,A,m.submitted&&m.controls.address.errors)),t(),c(m.submitted&&m.controls.address.errors?18:-1),t(4),s(" ",d(23,24,"warehouse.city")," "),t(2),I("ngClass",N(36,A,m.submitted&&m.controls.city.errors)),t(),c(m.submitted&&m.controls.city.errors?25:-1),t(4),s(" ",d(30,26,"warehouse.country")," "),t(2),I("options",m.countries)("value",m.controls.countryId.value),t(),c(m.submitted&&m.controls.countryId.errors?32:-1),t(),c(m.paginatedResponse?33:-1),t(4),s(" ",d(38,28,"action.submit")," "),t(4),s(" ",d(42,30,"item.new")," "))},dependencies:[q,P,j,R,k,D,T,M,V,X,Q,le,ae,re],encapsulation:2})};export{ce as WarehouseFormComponent};
